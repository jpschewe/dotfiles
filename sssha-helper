# Hey EMACS, this should be in -*- sh -*- mode

if [ $OSTYPE = "cygwin" ]; then
    agent_env=`ipconfig /all | egrep "Physical Address" | awk '{print $NF}' | head -1`
elif [ -x /sbin/ifconfig ]; then
    # find the first ethernet card's MAC address as this is unique to a machine.
    # Make sure to grep out vmware server interfaces 
    agent_env=`/sbin/ifconfig -a | egrep '(ether|HWaddr)' | awk '{print $NF}' | egrep -iv '^00:50:56' | head -1`
elif [ -n "${HOSTNAME}" ]; then
  agent_env=${HOSTNAME}
else
  agent_env="unknown-host"  
fi

if [ -n "`type -p gnome-keyring-daemon`" ]; then
  . "${HOME}/.ssh/sssha" -g -e ${agent_env}
else
  . "${HOME}/.ssh/sssha" -e ${agent_env}
fi
